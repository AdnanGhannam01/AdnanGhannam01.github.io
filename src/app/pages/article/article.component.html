<docs-loading *ngIf="loading"></docs-loading>
<div class="container docs-with-sidebar">
    <aside>
        <p-tree [value]="nodes" [filter]="true" filterPlaceholder="Search...">
            <ng-template let-node pTemplate="url">
                <a class="docs-link" docs-list-item [routerLink]="node.data" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                    {{ node.label }}
                </a>
            </ng-template>
            <ng-template let-node pTemplate="default">
                <strong>{{ node.label }}</strong>
            </ng-template>
        </p-tree>
    </aside>
    <section *ngIf="article">
        <p-breadcrumb class="max-w-full" [model]="breadcrumbItems" [home]="home"></p-breadcrumb>
        <header class="article__header">
            <h1 class="article__title">{{ article.title }}</h1>
            <p-button 
                *ngIf="isLoggedIn"
                icon="pi pi-ellipsis-v" 
                styleClass="p-button-rounded p-button-text"
                (onClick)="menu.toggle($event)"
            ></p-button>
        </header>
        <p class="article__desc">{{ article.description }}</p>

        <p-divider></p-divider>

        <!-- TODO add markdown viewer -->
        <div class="article__content">{{ article.content }}</div>
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptas veritatis quisquam nemo, rem eveniet accusantium aliquam distinctio aperiam a recusandae, qui est esse explicabo nobis harum impedit ab nesciunt quidem, totam voluptatem illum fugit voluptates optio? Tenetur id doloribus amet hic provident. Sed, beatae explicabo libero, ex animi voluptates soluta aliquam officia, culpa blanditiis cumque veritatis numquam. Reprehenderit, fugiat vel amet nesciunt quidem rerum laborum eveniet repudiandae temporibus quas impedit tempora dolores animi at reiciendis adipisci ullam cum dolorum ab minima hic obcaecati? Voluptates eligendi voluptatem accusantium quod voluptatum delectus, exercitationem eaque. At voluptatem repudiandae dicta, vitae rerum quasi nostrum voluptas! Laborum aut distinctio dignissimos eligendi. Officiis maxime ipsa labore laboriosam neque, quos sed repellendus architecto reprehenderit qui ea nemo nesciunt dolor fugiat illo atque dignissimos. Dolore laudantium aliquid reiciendis corporis perspiciatis consectetur. Fugiat architecto similique aspernatur eaque doloremque perferendis optio harum ipsum. Expedita cupiditate aspernatur officiis veniam optio, repudiandae, laborum aperiam reprehenderit quaerat facilis deleniti magni ducimus ullam pariatur veritatis debitis iste aliquid enim itaque alias nostrum! Id facere quas praesentium, ea doloremque quibusdam, veritatis est sed dolorum iure minus quia vero reiciendis reprehenderit. Ducimus ipsam rerum inventore aspernatur est iusto esse, ratione, laborum officia labore quo nihil sed adipisci. Quas labore doloremque eius iusto quam, id, suscipit amet doloribus modi inventore nostrum similique tempora minima, ea alias at. Harum esse quos eveniet aperiam vel, possimus, odio ratione debitis facilis laborum ipsa expedita? Esse sint aut totam asperiores aliquam non saepe fugiat libero harum odit, commodi omnis a nulla obcaecati explicabo, magni dolor, alias blanditiis error. Delectus a eos quaerat ex, recusandae culpa hic tenetur amet officiis magni perferendis laudantium incidunt natus. Blanditiis totam accusamus ullam autem aut nam architecto eius odio quo minus et corrupti vel tempore cumque distinctio, pariatur illo cupiditate aspernatur. Adipisci aperiam modi, ea recusandae voluptatum architecto accusamus non quam quo cumque odio nobis praesentium. Quibusdam mollitia veritatis dicta accusamus, suscipit quisquam recusandae quis, rem facilis ut laborum blanditiis nihil fugit perspiciatis in assumenda officiis maxime veniam dolores iure fugiat quidem incidunt! Sit numquam et aspernatur cupiditate alias voluptatum. Inventore illo quod veniam nam exercitationem dolor ab esse nesciunt. Perferendis sint ipsa labore itaque quidem dignissimos expedita obcaecati id eligendi ipsam. Odio maiores, iusto alias rem eaque distinctio nobis libero sunt odit soluta necessitatibus quo earum in officia eveniet architecto eius quis nulla? Esse sapiente explicabo provident voluptatibus, accusamus vero tempora. Eius cupiditate eaque iusto autem et quisquam saepe, a voluptatibus excepturi cum est dolorem non natus corrupti doloremque consequatur rerum quo vitae explicabo quam quas sunt. Animi nihil quas, architecto cupiditate iusto ut nostrum reiciendis quod a molestiae laboriosam consequatur corrupti excepturi esse repudiandae. Laboriosam exercitationem quibusdam id tempora magnam molestias natus perspiciatis dignissimos, ducimus cumque sit voluptatibus ipsum vero iste voluptatum fuga velit facere accusamus perferendis voluptates dolorum cum nam. Exercitationem consequatur recusandae voluptatem possimus id eum molestias impedit illo. Tenetur ad cumque, natus ex, rem animi numquam similique dolor pariatur, optio quaerat atque illo sapiente cupiditate voluptatem ipsum laudantium eius ut velit nulla enim. A debitis aspernatur quam itaque vero dolorum praesentium, earum reprehenderit facere nihil molestias enim nam qui sint. Inventore vel magnam doloremque voluptatum eveniet qui sapiente accusamus tenetur expedita dolore eligendi nesciunt repellat, nostrum eos maxime saepe commodi ipsam? Saepe, non exercitationem. Eius possimus eum consectetur hic! Nulla, ipsam minima. Mollitia placeat ab iusto ea, dicta officiis voluptatibus exercitationem! Cupiditate officiis delectus dicta ipsa qui dolor doloremque! Repellendus ullam at obcaecati, quos voluptates, quo fuga ipsum voluptatum similique quibusdam laborum. Voluptatum dolore optio molestiae excepturi fuga porro quasi quisquam cupiditate nobis et consectetur nam voluptas consequuntur quo, ab quia deserunt! Vel soluta sunt autem illo ipsa, inventore corrupti aliquam velit, provident dolorem quia laborum explicabo quasi itaque, libero ullam! Iste culpa accusamus magnam voluptatibus quae! Molestias beatae a perspiciatis omnis aperiam in veritatis excepturi consequatur pariatur magnam incidunt distinctio sapiente, iure obcaecati tempora eos corporis sunt aut illo quibusdam culpa sit alias est. In neque nemo at asperiores cumque odio saepe hic exercitationem modi vero ex sed quasi impedit, totam illum fugiat quis eaque repellendus illo placeat qui quisquam labore. Nam ipsum natus et suscipit optio. Odit magni maiores dignissimos, culpa facilis soluta fugit quisquam ipsa cumque sed sequi ab atque suscipit! Consequuntur in explicabo sapiente, ipsam mollitia exercitationem, quasi libero quo rem enim cum est iure eos, voluptatibus sunt atque. Quibusdam, quasi aut. Fugit commodi nihil in assumenda, dolores quasi excepturi at molestias deleniti necessitatibus impedit consequuntur laudantium saepe ullam praesentium debitis, ipsa quos et quisquam. Molestias magni repellat earum, reprehenderit, sit commodi eligendi odio ducimus beatae odit velit autem magnam, ratione eaque fuga aperiam quidem rerum totam! Necessitatibus esse accusamus doloribus quasi, vel cum quas, placeat reiciendis ipsum dolorum sunt nobis? Quisquam earum corporis, quia quo repellat harum id nobis eos eum quos hic magni, a necessitatibus dolore reprehenderit maiores doloremque pariatur totam veritatis? Tenetur dolores architecto cumque maiores, sequi voluptate vitae totam in! Sed perferendis earum ut amet voluptatibus voluptates alias, doloremque consequatur nihil minima enim, hic a placeat incidunt perspiciatis non numquam fuga possimus quisquam commodi esse deleniti obcaecati! Est ipsum temporibus nihil harum eum repellendus minus sint hic? Quia tempora provident nemo quod cupiditate aliquid, dignissimos incidunt explicabo perferendis voluptates ut nam cumque repellendus, sunt magnam voluptate modi qui id quisquam earum voluptatem. Molestias fuga explicabo, voluptatem consectetur aliquam aliquid ducimus. Quo possimus nemo eum ut at dolor magni temporibus a atque id, voluptas ratione dicta quod quia quis alias dignissimos voluptatum cupiditate. A tempora similique autem aliquid, nihil ea magni sapiente quasi inventore, assumenda rerum iste. Laborum, omnis architecto placeat suscipit aliquid, quisquam debitis molestias aut porro eos, voluptas nulla accusantium eius nam iste impedit exercitationem. Ducimus non facilis vero provident facere asperiores aliquid, laudantium distinctio quaerat eaque quisquam odio placeat consequuntur minus ea, rem mollitia quod repellendus autem deserunt earum! Consequatur nesciunt ut quis exercitationem, quidem reprehenderit repellat et quo inventore dolore possimus illum ducimus tempore ipsa culpa at! Corrupti pariatur eos id vero, rem quis illum autem, natus sed explicabo iste?

        <p-divider></p-divider>

        <div class="article__footer">
            <div class="article__footer__btns">
                <div>
                    <p-button
                        [icon]="liked ? 'pi pi-thumbs-up-fill' : 'pi pi-thumbs-up'"
                        styleClass="p-button-success"
                        for="like"
                        (onClick)="toggle(true)"
                        label="Like">
                    </p-button>
                </div>
                <div>
                    <p-button
                        [icon]="liked === false ? 'pi pi-thumbs-down-fill' : 'pi pi-thumbs-down'"
                        styleClass="p-button-danger"
                        for="dislike"
                        (onClick)="toggle(false)"
                        label="Dislike">
                    </p-button>
                </div>
            </div>
            <div class="article__footer__info">
                <small class="article__footer__views">
                    <span class="pi pi-eye"></span>
                    {{ article.views }}
                </small>
                <p-button icon="pi pi-paperclip" 
                    styleClass="p-button-text"
                    (onClick)="copyLink()"
                    pTooltip="Copy Link" tooltipPosition="top"
                ></p-button>
            </div>
        </div>
    </section>
</div>

<p-menu #menu [model]="optionsMenu" [popup]="true"></p-menu>
<p-dialog header="Send a Feedback"
    [(visible)]="feedbackVisible" 
    position="top" 
    [modal]="true" 
    [draggable]="false"
    [style]="{ 'min-width': '50vw' }">
    <form (submit)="sendFeedback(textarea)">
        <textarea #textarea 
            rows="5"
            pInputTextarea 
            name="feedback"
            placeholder="Write your feedback..."
            [style]="{ 'width': '100%' }"
        ></textarea>
        <p-button 
            [style]="{ 'width': '100%', 'margin-top': '.5em' }"
            type="submit"
            styleClass="p-button-primary"
            label="Send"
        ></p-button>
    </form>
</p-dialog>

<p-dialog header="Article Creators" 
    *ngIf="article"
    [(visible)]="creatorsVisible"
    position="top" 
    [modal]="true" 
    [draggable]="false"
    [style]="{ 'min-width': '30vw' }">
    <a 
        *ngFor="let creator of article.creators"
        class="docs-link" 
        docs-list-item>
        <span class="pi pi-user" [style]="{ 'margin-inline-end': '1em' }"></span>
        {{ creator.name }}
    </a>
</p-dialog>

<p-toast></p-toast>